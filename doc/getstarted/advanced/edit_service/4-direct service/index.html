<h1 id="direct-controlcalulate-in-javascript">Direct Control/Calulate in JavaScript</h1><p>IoT SOL is based on Node.js, so it is the most staightfoward method to implement the service in JavaScript. Majority of our builtin services belong to this category.</p><p>Besides the special function (e.g. <code>sendOUT</code>) and the special variable (e.g. <code>shared</code> and <code>IN</code>), you can write just like a standard Nodejs program. You can require any 3rd-party npm modules as long as the module is in your module search path.</p><p>In the <a href="https://github.com/01org/intel-iot-services-orchestration-layer/blob/master/demo/startkit/thing_bundle/led/switch/start.js">led's switch service</a>, we require the <code>mraa</code> module. <a href="https://github.com/intel-iot-devkit/mraa">MRAA</a> is a builtin node module on Edison Image for controling peripherals.</p><p>Led switch's start.js</p><div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> m <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;mraa&quot;</span>)<span class="op">;</span>
<span class="va">shared</span>.<span class="at">pin</span> <span class="op">=</span> <span class="kw">new</span> <span class="va">m</span>.<span class="at">Gpio</span>(<span class="va">CONFIG</span>.<span class="at">pin</span>)<span class="op">;</span>
<span class="at">done</span>()<span class="op">;</span></code></pre></div><p>Led switch's kernel.js</p><div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;led switch:&quot;</span><span class="op">,</span> <span class="va">IN</span>.<span class="at">on</span><span class="op">,</span> <span class="va">CONFIG</span>.<span class="at">pin</span>)<span class="op">;</span>
<span class="va">shared</span>.<span class="va">pin</span>.<span class="at">dir</span>(<span class="dv">0</span>)<span class="op">;</span>
<span class="kw">var</span> value <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>
<span class="cf">if</span> (<span class="va">IN</span>.<span class="at">on</span>) <span class="op">{</span>
  value <span class="op">=</span> <span class="dv">1</span><span class="op">;</span>
<span class="op">}</span>
<span class="va">shared</span>.<span class="va">pin</span>.<span class="at">write</span>(value)<span class="op">;</span>
<span class="at">sendOUT</span>(<span class="op">{</span><span class="dt">status </span><span class="op">:</span> <span class="op">!!</span><span class="va">IN</span>.<span class="at">on</span><span class="op">}</span>)<span class="op">;</span></code></pre></div>
